<% s = Session.current %>
<div class="poptitle"><%=t "compare.index.title"%></div>

<div id="comparisonmatrix">
	<div class="column">
		<div class="outertitle leftmostcolumn leftmostoutertitle"><div class="columntitle leftmostcolumn leftmostcolumntitle"></div></div>
		<div class="thumbnailcell leftmostcolumn">								
			<div class="tabletitle leftcolumntext"> <%= t('compare.index.tabletitle') %> </div>
		</div>
		<%= render :partial => 'featurenames', :locals => {:featurelist => (s.continuous["filter"]+s.categorical["filter"]+s.binary["filter"])} %>
		<div class="cell leftmostcolumn"> </div>
	</div>

	<% for i in 0..@products.count-1%>
		<div class="column">
			<div class="outertitle"><div class="columntitle">
					<%= link_to image_tag('remove.png', :style => "vertical-align: text-top;")+" "+t('compare.index.remove'), "", :"data-name" => @products[i].id, :class => 'remove' %>
			</div></div>
			<% contspecs = ContSpec.cache_all(@products[i].id) %>
			<%= render :partial => 'thumbnails', :object => @products[i], :locals => {:navBack => :back, :i => i, :total => @products.count, :contspecs => contspecs} %>
			<%= render :partial => 'featurevalues', :locals => {:product => @products[i], :numberofproducts => @products.count, :contspecs => contspecs, :s => s} %>
		</div>
	<% end %>
	<div class="bgrow"></div>
	<div class="bgrow" style="top: 225px;"></div>
</div>