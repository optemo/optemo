<% k = cat_option.first %>
<% available_count = cat_option.second %>
<% checked = chosen_cats.include?(k) %>
<div class="list_item hanging_indent <%=raw ' disabled' if available_count == 0 %>" <%=raw "style='font-weight:bold;'" if checked %>>
  <%= check_box_tag "categorical[#{f.name}]", k, checked, :disabled => (available_count == 0 && !checked) ? true : false, :class => 'cat_filter', :'data-disabled' => (available_count == 0) ? 'true' : 'false' %>
  <%= (available_count == 0) ?  t("#{Session.product_type}.filter.#{k}.name",:default=>["#{k}.name".to_sym,k]) : link_to(t("#{Session.product_type}.filter.#{k}.name", :default=>["#{k}.name".to_sym,k]), "#", :class => "checkbox_text") %>
  <span class="av_count"><%= "(#{available_count})" unless checked %></span>
  <% if checked && f.name == "product_type" %>
    <% optionlist1 = sub_level(k) %>
    <% optionlist1.each do |k1,available_count1| %>
      <% checked1 = chosen_cats.include?(k1) %>
	    <div class="list_item hanging_indent" <%=raw "style='font-weight:normal;'" unless checked1 %> >
        <%= check_box_tag "categorical[#{f.name}]", (k + "+" + k1), checked1, :class => 'cat_filter' %>
	      <%= (available_count1 == 0) ?  t("#{Session.product_type}.filter.#{k1}.name",:default=>k1) : link_to(t("#{Session.product_type}.filter.#{k1}.name", :default=>k1), "#", :class => "checkbox_text") %>
        <span class="av_count"><%= "(#{available_count1})" unless checked1 %></span>
      </div>
    <% end %> <%# optionlist1.each %>
  <% end %> <%# if checked %>
</div>