var <%= val %>handles = ['<%= val %>handle_min','<%= val %>handle_max'];
var a = new Control.Slider(<%= val %>handles, '<%= val %>slider', {
	range: $R(<%= min %>,<%= max %>),
	sliderValue: [<%= @search.nil? ? min : @search.send("#{val}_min".intern) %>,<%= @search.nil? ? max : @search.send("#{val}_max".intern) %>],
	restricted: true,
	onSlide: function(v) {
		<% if money_formatting %>
			disp_money(v,'<%= val %>disp','myfilter_<%= val %>_min','myfilter_<%= val %>_max');
		<% else %>
			disp(v,'<%= val %>disp','myfilter_<%= val %>_min','myfilter_<%= val %>_max','<%= session[:productType].constantize::MainFeaturesLabel[val] %>');
		<% end %>
		//$('<%= val %>hist').innerHTML="";
		//histogram([0.5,0.7,0.1,0.5,0.3,1,0.6,0.4,0.3,0.3],"<%= val %>hist",v[0] /<%= max %>,v[1] /<%= max %>);
		},
	onChange: 	function(v) {
		/*<% if money_formatting %>
			disp_money(v,'<%= val %>disp','myfilter_<%= val %>_min','myfilter_<%= val %>_max');
		<% else %>
			disp(v,'<%= val %>disp','myfilter_<%= val %>_min','myfilter_<%= val %>_max');
		<% end %>
		$('<%= val %>hist').innerHTML="";
		histogram([0.5,0.7,0.1,0.5,0.3,1,0.6,0.4,0.3,0.3],"<%= val %>hist",(v[0]-<%= min %>)/<%= max - min %>,(v[1]-<%= min %>)/<%= max - min %>);*/
		}
});
if(typeof(mysliders) == 'undefined') {var mysliders = [];}
mysliders.push(a);
histogram([0.5,Math.round((Math.random()*9))/10,Math.round((Math.random()*9))/10,0.5,0.3,Math.round((Math.random()*9))/10,Math.round((Math.random()*9))/10,0.4,0.3,0.3],"<%= val %>hist",<%= (@session.send("#{val}_min".intern) - min) / (max-min) %>,<%= (@session.send("#{val}_max".intern)-min) / (max-min) %>);