<div class='feature<%= " extra" if extra %>' <%= "style='display:none;'" if extra && !@session.expert %>>

<div class='label space'>
	<%= render :partial => 'desc', :locals => {:feat => val} %>
	<%= link_to name, "#" %> 
	<span class="unitdisp">
	(<%= $model::FeaturesLabel[val] %>)
	</span>
</div>
<% prodmin = i2f ? @s.ranges(val)[0]/100 : roundmin(@s.ranges(val)[0]) %>
<% prodmax = i2f ? (@s.ranges(val)[1]/100).ceil : roundmax(@s.ranges(val)[1]) %>
<% overallmin = dbmin(i2f, val) %>
<% overallmax = dbmax(i2f, val) %>
<% startmin = @session.features.send("#{val}_min".intern).nil? ? overallmin : i2f ? @session.features.send("#{val}_min".intern)/100 : @session.features.send("#{val}_min".intern) %>
<% startmax = @session.features.send("#{val}_max".intern).nil? ? overallmax : i2f ? (@session.features.send("#{val}_max".intern)/100).ceil : @session.features.send("#{val}_max".intern) %>
<div class="hist" data-data="<%= @s.distribution(val).join(',') %>"></div>
<%= hidden_field_tag "myfilter[#{val}_min]", i2f ?
	((mymin = @session.features.send("#{val}_min".intern)).nil? ? '' : mymin/100) : 
	@session.features.send("#{val}_min".intern),
{:class => 'min'}%>
<%= hidden_field_tag "myfilter[#{val}_max]", i2f ? 
	((mymax = @session.features.send("#{val}_max".intern)).nil? ? '' : mymax/100) :
	@session.features.send("#{val}_max".intern),
{:class => 'max'}%>
<div class='slider'
data-min='<%= overallmin %>'
data-max='<%= overallmax %>'
data-startmin='<%= startmin %>'
data-startmax='<%= startmax %>'
data-itof='<%= i2f %>'
<%= money_formatting ? 'data-formatting="$"' : ""  %>>

<div class="centerofslider" style="background:url(../../../images/slider.gif) no-repeat; height:13px; overflow:hidden"> </div>
</div>
</div>