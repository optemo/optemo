<div class='feature<%= " extra" if extra %>' <%= "style='display:none;'" if extra && !@session.expert %>>

<div class='label space'>
	<%= render :partial => 'desc', :locals => {:feat => val} %>
	<% if val == "price" %>
		<%= t('products.price') %>
	<% else %>
		<%= link_to t('products.'+val), "#" %>
	<% end %>
	<span class="unitdisp">(<%= t('products.' + val+"unit") %>)</span>
</div>
<% overallmin = dbmin(i2f, val) %>
<% overallmax = dbmax(i2f, val) %>
<% startmin = @session.features.send("#{val}_min".intern).nil? ? overallmin : i2f ? @session.features.send("#{val}_min".intern)/100 : @session.features.send("#{val}_min".intern) %>
<% startmax = @session.features.send("#{val}_max".intern).nil? ? overallmax : i2f ? (@session.features.send("#{val}_max".intern)/100).ceil : @session.features.send("#{val}_max".intern) %>
<div class="hist" data-data="<%= @s.distribution(val).join(',') %>"></div>
<%= hidden_field_tag "myfilter[#{val}_min]", i2f ?
	((mymin = @session.features.send("#{val}_min".intern)).nil? ? '' : mymin/100) : 
	@session.features.send("#{val}_min".intern),
{:class => 'min'}%>
<%= hidden_field_tag "myfilter[#{val}_max]", i2f ? 
	((mymax = @session.features.send("#{val}_max".intern)).nil? ? '' : mymax/100) :
	@session.features.send("#{val}_max".intern),
{:class => 'max'}%>
<div class='slider'
data-label= '<%= val %>'
data-min='<%= overallmin %>'
data-max='<%= overallmax %>'
data-startmin='<%= startmin %>'
data-startmax='<%= startmax %>'
data-itof='<%= i2f %>'
<%= money_formatting ? 'data-formatting="$"' : ""  %>>

<div class="centerofslider">&nbsp;</div>
</div>
</div>